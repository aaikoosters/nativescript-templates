import { unsetValue } from '@nativescript/core';
import { isBlank } from '../../utils/lang-facade';
export class BaseValueAccessor {
    constructor(view) {
        this.view = view;
        this.pendingChangeNotification = 0;
        this.onChange = () => {
            //
        };
        this.onTouched = () => {
            //
        };
    }
    registerOnChange(fn) {
        this.onChange = (arg) => {
            if (this.pendingChangeNotification) {
                clearTimeout(this.pendingChangeNotification);
            }
            this.pendingChangeNotification = setTimeout(() => {
                this.pendingChangeNotification = 0;
                fn(arg);
            }, 20);
        };
    }
    registerOnTouched(fn) {
        this.onTouched = fn;
    }
    setDisabledState(isDisabled) {
        this.view.isEnabled = !isDisabled;
    }
    writeValue(_) {
        //
    }
    normalizeValue(value) {
        return isBlank(value) ? unsetValue : value;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFzZS12YWx1ZS1hY2Nlc3Nvci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3BhY2thZ2VzL2FuZ3VsYXIvc3JjL2xpYi9mb3Jtcy92YWx1ZS1hY2Nlc3NvcnMvYmFzZS12YWx1ZS1hY2Nlc3Nvci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxPQUFPLEVBQVEsVUFBVSxFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUFFdEQsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLHlCQUF5QixDQUFDO0FBRWxELE1BQU0sT0FBTyxpQkFBaUI7SUFTNUIsWUFBbUIsSUFBVztRQUFYLFNBQUksR0FBSixJQUFJLENBQU87UUFSdEIsOEJBQXlCLEdBQVEsQ0FBQyxDQUFDO1FBQzNDLGFBQVEsR0FBMEIsR0FBRyxFQUFFO1lBQ3JDLEVBQUU7UUFDSixDQUFDLENBQUM7UUFDRixjQUFTLEdBQUcsR0FBRyxFQUFFO1lBQ2YsRUFBRTtRQUNKLENBQUMsQ0FBQztJQUUrQixDQUFDO0lBRWxDLGdCQUFnQixDQUFDLEVBQW9CO1FBQ25DLElBQUksQ0FBQyxRQUFRLEdBQUcsQ0FBQyxHQUFHLEVBQUUsRUFBRTtZQUN0QixJQUFJLElBQUksQ0FBQyx5QkFBeUIsRUFBRTtnQkFDbEMsWUFBWSxDQUFDLElBQUksQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDO2FBQzlDO1lBQ0QsSUFBSSxDQUFDLHlCQUF5QixHQUFHLFVBQVUsQ0FBQyxHQUFHLEVBQUU7Z0JBQy9DLElBQUksQ0FBQyx5QkFBeUIsR0FBRyxDQUFDLENBQUM7Z0JBQ25DLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUNWLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUNULENBQUMsQ0FBQztJQUNKLENBQUM7SUFFRCxpQkFBaUIsQ0FBQyxFQUFjO1FBQzlCLElBQUksQ0FBQyxTQUFTLEdBQUcsRUFBRSxDQUFDO0lBQ3RCLENBQUM7SUFFRCxnQkFBZ0IsQ0FBQyxVQUFtQjtRQUNsQyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsR0FBRyxDQUFDLFVBQVUsQ0FBQztJQUNwQyxDQUFDO0lBRUQsVUFBVSxDQUFDLENBQU07UUFDZixFQUFFO0lBQ0osQ0FBQztJQUVTLGNBQWMsQ0FBQyxLQUFVO1FBQ2pDLE9BQU8sT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQztJQUM3QyxDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb250cm9sVmFsdWVBY2Nlc3NvciB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcbmltcG9ydCB7IFZpZXcsIHVuc2V0VmFsdWUgfSBmcm9tICdAbmF0aXZlc2NyaXB0L2NvcmUnO1xuXG5pbXBvcnQgeyBpc0JsYW5rIH0gZnJvbSAnLi4vLi4vdXRpbHMvbGFuZy1mYWNhZGUnO1xuXG5leHBvcnQgY2xhc3MgQmFzZVZhbHVlQWNjZXNzb3I8VFZpZXcgZXh0ZW5kcyBWaWV3PiBpbXBsZW1lbnRzIENvbnRyb2xWYWx1ZUFjY2Vzc29yIHtcbiAgcHJpdmF0ZSBwZW5kaW5nQ2hhbmdlTm90aWZpY2F0aW9uOiBhbnkgPSAwO1xuICBvbkNoYW5nZTogKGNoYW5nZTogYW55KSA9PiB2b2lkID0gKCkgPT4ge1xuICAgIC8vXG4gIH07XG4gIG9uVG91Y2hlZCA9ICgpID0+IHtcbiAgICAvL1xuICB9O1xuXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyB2aWV3OiBUVmlldykge31cblxuICByZWdpc3Rlck9uQ2hhbmdlKGZuOiAoXzogYW55KSA9PiB2b2lkKTogdm9pZCB7XG4gICAgdGhpcy5vbkNoYW5nZSA9IChhcmcpID0+IHtcbiAgICAgIGlmICh0aGlzLnBlbmRpbmdDaGFuZ2VOb3RpZmljYXRpb24pIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucGVuZGluZ0NoYW5nZU5vdGlmaWNhdGlvbik7XG4gICAgICB9XG4gICAgICB0aGlzLnBlbmRpbmdDaGFuZ2VOb3RpZmljYXRpb24gPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy5wZW5kaW5nQ2hhbmdlTm90aWZpY2F0aW9uID0gMDtcbiAgICAgICAgZm4oYXJnKTtcbiAgICAgIH0sIDIwKTtcbiAgICB9O1xuICB9XG5cbiAgcmVnaXN0ZXJPblRvdWNoZWQoZm46ICgpID0+IHZvaWQpOiB2b2lkIHtcbiAgICB0aGlzLm9uVG91Y2hlZCA9IGZuO1xuICB9XG5cbiAgc2V0RGlzYWJsZWRTdGF0ZShpc0Rpc2FibGVkOiBib29sZWFuKTogdm9pZCB7XG4gICAgdGhpcy52aWV3LmlzRW5hYmxlZCA9ICFpc0Rpc2FibGVkO1xuICB9XG5cbiAgd3JpdGVWYWx1ZShfOiBhbnkpIHtcbiAgICAvL1xuICB9XG5cbiAgcHJvdGVjdGVkIG5vcm1hbGl6ZVZhbHVlKHZhbHVlOiBhbnkpOiBhbnkge1xuICAgIHJldHVybiBpc0JsYW5rKHZhbHVlKSA/IHVuc2V0VmFsdWUgOiB2YWx1ZTtcbiAgfVxufVxuIl19