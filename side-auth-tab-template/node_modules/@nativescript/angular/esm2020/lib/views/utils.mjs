import { ContentView, LayoutBase, ProxyViewContainer, View } from '@nativescript/core';
import { InvisibleNode } from './invisible-nodes';
export function isDetachedElement(element) {
    return element && element.meta && element.meta.skipAddToDom;
}
export function isView(view) {
    return view instanceof View;
}
export function isInvisibleNode(view) {
    return view instanceof InvisibleNode;
}
export function isLayout(view) {
    return view instanceof LayoutBase;
}
export function isContentView(view) {
    return view instanceof ContentView;
}
export function getFirstNativeLikeView(view, extractFromNSParent = false) {
    if (view instanceof ProxyViewContainer) {
        if (view.getChildrenCount() === 0) {
            return null;
        }
        return getFirstNativeLikeView(view.getChildAt(0));
    }
    if (extractFromNSParent) {
        const node = view.parentNode;
        detachViewFromParent(view);
        view.parentNode = node;
    }
    return view;
}
export function detachViewFromParent(view) {
    const parent = view?.parent;
    if (!parent) {
        return;
    }
    if (parent.meta && parent.meta.removeChild) {
        parent.meta.removeChild(parent, view);
    }
    else if (isLayout(parent)) {
        parent.removeChild(view);
    }
    else if (isContentView(parent) && parent.content === view) {
        parent.content = null;
    }
    else if (isView(parent)) {
        parent._removeView(view);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9wYWNrYWdlcy9hbmd1bGFyL3NyYy9saWIvdmlld3MvdXRpbHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFdBQVcsRUFBRSxVQUFVLEVBQUUsa0JBQWtCLEVBQUUsSUFBSSxFQUFZLE1BQU0sb0JBQW9CLENBQUM7QUFDakcsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBR2xELE1BQU0sVUFBVSxpQkFBaUIsQ0FBQyxPQUFzQjtJQUN0RCxPQUFPLE9BQU8sSUFBYSxPQUFRLENBQUMsSUFBSSxJQUFhLE9BQVEsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDO0FBQ2xGLENBQUM7QUFFRCxNQUFNLFVBQVUsTUFBTSxDQUFDLElBQWE7SUFDbEMsT0FBTyxJQUFJLFlBQVksSUFBSSxDQUFDO0FBQzlCLENBQUM7QUFFRCxNQUFNLFVBQVUsZUFBZSxDQUFDLElBQWE7SUFDM0MsT0FBTyxJQUFJLFlBQVksYUFBYSxDQUFDO0FBQ3ZDLENBQUM7QUFFRCxNQUFNLFVBQVUsUUFBUSxDQUFDLElBQWE7SUFDcEMsT0FBTyxJQUFJLFlBQVksVUFBVSxDQUFDO0FBQ3BDLENBQUM7QUFFRCxNQUFNLFVBQVUsYUFBYSxDQUFDLElBQWE7SUFDekMsT0FBTyxJQUFJLFlBQVksV0FBVyxDQUFDO0FBQ3JDLENBQUM7QUFFRCxNQUFNLFVBQVUsc0JBQXNCLENBQUMsSUFBVSxFQUFFLG1CQUFtQixHQUFHLEtBQUs7SUFDNUUsSUFBSSxJQUFJLFlBQVksa0JBQWtCLEVBQUU7UUFDdEMsSUFBSSxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsS0FBSyxDQUFDLEVBQUU7WUFDakMsT0FBTyxJQUFJLENBQUM7U0FDYjtRQUNELE9BQU8sc0JBQXNCLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0tBQ25EO0lBRUQsSUFBSSxtQkFBbUIsRUFBRTtRQUN2QixNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDO1FBQzdCLG9CQUFvQixDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzNCLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDO0tBQ3hCO0lBQ0QsT0FBTyxJQUFJLENBQUM7QUFDZCxDQUFDO0FBRUQsTUFBTSxVQUFVLG9CQUFvQixDQUFDLElBQVU7SUFDN0MsTUFBTSxNQUFNLEdBQVcsSUFBSSxFQUFFLE1BQU0sQ0FBQztJQUNwQyxJQUFJLENBQUMsTUFBTSxFQUFFO1FBQ1gsT0FBTztLQUNSO0lBQ0QsSUFBSSxNQUFNLENBQUMsSUFBSSxJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFO1FBQzFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQztLQUN2QztTQUFNLElBQUksUUFBUSxDQUFDLE1BQU0sQ0FBQyxFQUFFO1FBQzNCLE1BQU0sQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUM7S0FDMUI7U0FBTSxJQUFJLGFBQWEsQ0FBQyxNQUFNLENBQUMsSUFBSSxNQUFNLENBQUMsT0FBTyxLQUFLLElBQUksRUFBRTtRQUMzRCxNQUFNLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQztLQUN2QjtTQUFNLElBQUksTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFO1FBQ3pCLE1BQU0sQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUM7S0FDMUI7QUFDSCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29udGVudFZpZXcsIExheW91dEJhc2UsIFByb3h5Vmlld0NvbnRhaW5lciwgVmlldywgVmlld0Jhc2UgfSBmcm9tICdAbmF0aXZlc2NyaXB0L2NvcmUnO1xuaW1wb3J0IHsgSW52aXNpYmxlTm9kZSB9IGZyb20gJy4vaW52aXNpYmxlLW5vZGVzJztcbmltcG9ydCB0eXBlIHsgTmdDb250ZW50VmlldywgTmdMYXlvdXRCYXNlLCBOZ1ZpZXcgfSBmcm9tICcuL3ZpZXctdHlwZXMnO1xuXG5leHBvcnQgZnVuY3Rpb24gaXNEZXRhY2hlZEVsZW1lbnQoZWxlbWVudDogVmlldyB8IE5nVmlldyk6IGJvb2xlYW4ge1xuICByZXR1cm4gZWxlbWVudCAmJiAoPE5nVmlldz5lbGVtZW50KS5tZXRhICYmICg8TmdWaWV3PmVsZW1lbnQpLm1ldGEuc2tpcEFkZFRvRG9tO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNWaWV3KHZpZXc6IHVua25vd24pOiB2aWV3IGlzIE5nVmlldyB7XG4gIHJldHVybiB2aWV3IGluc3RhbmNlb2YgVmlldztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzSW52aXNpYmxlTm9kZSh2aWV3OiB1bmtub3duKTogdmlldyBpcyBJbnZpc2libGVOb2RlIHtcbiAgcmV0dXJuIHZpZXcgaW5zdGFuY2VvZiBJbnZpc2libGVOb2RlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNMYXlvdXQodmlldzogdW5rbm93bik6IHZpZXcgaXMgTmdMYXlvdXRCYXNlIHtcbiAgcmV0dXJuIHZpZXcgaW5zdGFuY2VvZiBMYXlvdXRCYXNlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNDb250ZW50Vmlldyh2aWV3OiB1bmtub3duKTogdmlldyBpcyBOZ0NvbnRlbnRWaWV3IHtcbiAgcmV0dXJuIHZpZXcgaW5zdGFuY2VvZiBDb250ZW50Vmlldztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEZpcnN0TmF0aXZlTGlrZVZpZXcodmlldzogVmlldywgZXh0cmFjdEZyb21OU1BhcmVudCA9IGZhbHNlKSB7XG4gIGlmICh2aWV3IGluc3RhbmNlb2YgUHJveHlWaWV3Q29udGFpbmVyKSB7XG4gICAgaWYgKHZpZXcuZ2V0Q2hpbGRyZW5Db3VudCgpID09PSAwKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIGdldEZpcnN0TmF0aXZlTGlrZVZpZXcodmlldy5nZXRDaGlsZEF0KDApKTtcbiAgfVxuXG4gIGlmIChleHRyYWN0RnJvbU5TUGFyZW50KSB7XG4gICAgY29uc3Qgbm9kZSA9IHZpZXcucGFyZW50Tm9kZTtcbiAgICBkZXRhY2hWaWV3RnJvbVBhcmVudCh2aWV3KTtcbiAgICB2aWV3LnBhcmVudE5vZGUgPSBub2RlO1xuICB9XG4gIHJldHVybiB2aWV3O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGV0YWNoVmlld0Zyb21QYXJlbnQodmlldzogVmlldykge1xuICBjb25zdCBwYXJlbnQgPSA8TmdWaWV3PnZpZXc/LnBhcmVudDtcbiAgaWYgKCFwYXJlbnQpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKHBhcmVudC5tZXRhICYmIHBhcmVudC5tZXRhLnJlbW92ZUNoaWxkKSB7XG4gICAgcGFyZW50Lm1ldGEucmVtb3ZlQ2hpbGQocGFyZW50LCB2aWV3KTtcbiAgfSBlbHNlIGlmIChpc0xheW91dChwYXJlbnQpKSB7XG4gICAgcGFyZW50LnJlbW92ZUNoaWxkKHZpZXcpO1xuICB9IGVsc2UgaWYgKGlzQ29udGVudFZpZXcocGFyZW50KSAmJiBwYXJlbnQuY29udGVudCA9PT0gdmlldykge1xuICAgIHBhcmVudC5jb250ZW50ID0gbnVsbDtcbiAgfSBlbHNlIGlmIChpc1ZpZXcocGFyZW50KSkge1xuICAgIHBhcmVudC5fcmVtb3ZlVmlldyh2aWV3KTtcbiAgfVxufVxuIl19